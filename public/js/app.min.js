(()=>{"use strict";
    var e,t;e=function(e){
        1==e?document.querySelector("html").classList.add("webp"):document.querySelector("html").classList.add("no-webp")},
        (t=new Image).onload=t.onerror=function(){e(2==t.height)},
        t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
    const o=document.querySelector(".header");if(o){const h=document.querySelector(".header__wrapper").
        clientHeight;window.addEventListener("scroll",(()=>{window.pageYOffset>=28?
        (document.querySelector(".header__block").style.height=h-30+"px",document.querySelector(".header__block").
            style.display="block",document.querySelector(".page").style.marginTop="0",o.classList.add("_scroll")):
        (document.querySelector(".header__block").style.display="none",o.classList.remove("_scroll"),document.querySelector(".page").
            style.marginTop="-93px")}))}const n=document.querySelector(".menu__icon"),s=document.querySelector(".menu");
    n&&n.addEventListener("click",(()=>{n.classList.toggle("_active"),s.classList.toggle
    ("_active"),document.body.classList.toggle("lock")}));const r=()=>{n.classList.remove("_active"),s.classList.remove("_active")};
    document.addEventListener("touchmove",(function(e){document.body.scrollTop<0&&e.preventDefault()}));let i=(e,t,o=500)=>
    {e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",
        e.style.transitionDuration=o+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",
        e.style.height=t+"px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,
        window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty
        ("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty
        ("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),o))},l=(e,t=500)=>
    {if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let o=e.offsetHeight;e.style.height="252px",
        e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="" +
        "height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),
        e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),
        window.setTimeout((()=>{e.classList.remove("_slide")}),t)}};const c=document.querySelectorAll(".item-review");
    if(c.length>0)for(let f of c){const v=f.querySelector(".item-review__text"),L=f.querySelector(".item-review__button"),
        S=v.textContent,_=S.slice(0,262)+"...";if(v.textContent.length>290){v.textContent=_,f.classList.add("more");let w=f.offsetHeight;
            function q(){w=f.offsetHeight}setTimeout(q,2500),window.addEventListener("resize",q),L.addEventListener("click",(()=>
        {L.classList.toggle("hide"),L.classList.contains("hide")?(v.textContent=S,l(f,200),L.textContent="Скрыть полный отзыв"):
            (v.textContent=_,i(f,w,200),L.textContent="Смотреть полный отзыв")}))}}const a=document.querySelectorAll(".popup-link"),
        d=document.querySelector("body"),p=document.querySelectorAll(".lock-padding");let m=!0;a.length>0&&a.forEach((e=>
    {e.addEventListener("click",(function(t){const o=e.getAttribute("href").replace("#","");
        !function(e){if(e&&m){const t=document.querySelector(".popup.active");t?y(t,!1):function(){const e=window.innerWidth-document.querySelector(".page").offsetWidth+"px";p.langth>0&&p.forEach((t=>{t.style.paddingRight=e})),d.style.paddingRight=e,d.classList.add("lock"),s.classList.contains("_active")&&r(),m=!1,setTimeout((function(){m=!0}),800)}(),e.classList.add("active"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||y(e.target.closest(".popup"))}))}}(document.getElementById(o)),t.preventDefault()}))}));const u=document.querySelectorAll(".close-popup");function y(e,t=!0){m&&(e.classList.remove("active"),t&&(setTimeout((function(){p.length>0&&p.forEach((e=>{e.style.paddingRight="0px"})),d.style.paddingRight="0px",d.classList.remove("lock")}),800),m=!1,setTimeout((function(){m=!0}),800)))}u.length>0&&u.forEach((e=>{e.addEventListener("click",(function(t){y(e.closest(".popup")),t.preventDefault()}))})),document.addEventListener("keydown",(e=>{27===e.which&&y(document.querySelector(".popup.active"))})),Element.prototype.closest&&(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches&&(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);const g=document.querySelectorAll(".menu-link");if(g.length>0)for(let A of g)A.addEventListener("click",(e=>{const t=document.querySelector(A.dataset.goto);if(A.dataset.goto&&document.querySelector(A.dataset.goto)){e.preventDefault(),r(),document.body.classList.remove("lock");const o=t.getBoundingClientRect().top+pageYOffset-document.querySelector(".header__wrapper").
        offsetHeight-50;window.scrollTo({top:o,behavior:"smooth"})}}))})();
